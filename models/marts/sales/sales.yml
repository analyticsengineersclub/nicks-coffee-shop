version: 2

models:
    - name: sales__by_customer_and_item
      description: "A sales data model, to be queried/aggregated further by BI tools. The grain is each individual item sold."
      columns:
        - name: order_id
          tests: 
            - not_null
        - name: created_at
          tests: 
            - not_null
        - name: product_id
          tests: 
            - not_null
        - name: product_name
          tests: 
            - not_null
        - name: product_category
          tests: 
            - not_null
        - name: price_charged
          description: The price of the item at the time of the sale. One order currently doesn't fit this assumption, so we must validate why.
          tests: 
            - not_null
                error_if: ">2" #work around order_id '8a9785d6-ba04-43bb-9786-2b6804e11487' while validating why its components have no set price.
        - name: customer_id
          tests: 
            - not_null